
# Les langages du web

Les langages du web sont les technologies qui permettent de cr√©er, structurer, styliser, et faire fonctionner des sites et applications web. On peut les classer en trois grandes cat√©gories‚ÄØ: langages de **structure**, de **style**, et de **comportement**, auxquels s‚Äôajoutent les langages c√¥t√© serveur et les technologies associ√©es. 

::: {.callout-tip title="Comment √©crire et tester du code ?"}
Pour √©crire du code, on utilise g√©nralement une IDE (environnements de d√©veloppement). Il en existe de nombreux sur la march√© et un certains npmbreu d'entre eux sont gratuits. Mais on peut utiliser un simple √©diteur de texte type **notepad** ou **notepadd++**. Ensuite, il suffit d'ouvrir les fichiers avec votre navigateur web pr√©f√©r√©. 
![](img/ide.png){width=70%}
Vous pouvez aussi utiliser des environnement de d√©veloppement en ligne sp√©cialement con√ßu pour tester, partager et d√©boguer du code.  On peut citer **JSFiddle**, **CodePen**, **JSBin**, **PlayCode**, **StackBlitz** ou **Observable**. Pour ce cours, je vous propose d'utiliser **JSFiddle**.

<a href="https://jsfiddle.net" target="_blank">
  ![](img/jsfiddle.png){width="20%"}
</a>
:::

# Le HTML

Le **HyperText Markup Language**, g√©n√©ralement abr√©g√© HTML est ce qui correspond au squelette d'une page web. C'est la structuration du document. Le HTML est structur√© par des **balises** emboit√©es les unes dans les autres.


```{.html .custom-html}
<!DOCTYPE html>
<html>
  <head>
    <title>Page Title</title>
  </head>
  <body>
    <h1>This is a Heading</h1>
    <div id="mondiv">something here</div>
    <p>This is a paragraph.</p>
    <!-- commentaire -->
    <ul>
        <li>Pomme</li>
        <li>Banane</li>
        <li class= "highlight">Orange</li>
    </ul>

  </body>
</html>
```

En HTML, on peut cr√©er des formulaires.

```{.html .custom-html}
<form>
  Nom : <input type="text"><br>
  Mot de passe : <input type="password"><br>
  Email : <input type="email"><br>
  Age : <input type="number" min="0"><br>
  Sexe : 
    <input type="radio" name="sexe" value="homme"> Homme
    <input type="radio" name="sexe" value="femme"> Femme<br>
  Abonnement : <input type="checkbox"><br>
  Date de naissance : <input type="date"><br>
  Couleur pr√©f√©r√©e : <input type="color"><br>
  Fichier : <input type="file"><br>
  <input type="submit" value="Envoyer">
</form>
```

Grace √† la balise `svg`, on peut m√™me dessiner directement.
```{.html .custom-html}
<h1>Un cercle SVG</h1>
<svg width="200" height="200">
  <circle cx="100" cy="100" r="50" fill="green" />
</svg>
````




# Le CSS

Les feuilles de style en cascade, g√©n√©ralement appel√©es CSS de l'anglais Cascading Style Sheets, forment un langage informatique qui d√©crit la pr√©sentation des documents HTML. Le CSS d√©finit le **style** et le **positionnement** des √©l√©ments sur la page.

```{.css .custom-css}
body {
  background-color: lightblue;
}

h1 {
  color: white;
  text-align: center;
}

p {
  font-family: verdana;
  font-size: 20px;
}

ul {
  list-style-type: disc;   /* Puces rondes par d√©faut */
  padding-left: 1em;       /* L√©g√®re indentation */
  font-family: sans-serif;
}

li {
  margin: 0.3em 0;         /* Petit espace entre les lignes */
}

```
On peut modifier le styles l'√©l√©ments sp√©cifiques qu'on identifie par une **classe** ou un **identifiant**.

```{.css .custom-css}
#mondiv {
  background-color: #f0f8ff;   /* Bleu tr√®s clair */
  border-left: 4px solid #007acc; /* Liser√© bleu */
  padding: 0.5em 1em;
  margin: 1em 0;
  font-family: sans-serif;
  font-size: 1rem;
}

.highlight {
  color: #c62828;               /* Rouge profond */
  font-weight: bold;
  background-color: #fff3e0;    /* Fond cr√®me doux */
  padding: 0.2em 0.5em;
  border-radius: 4px;
}
```

En plus de d√©finir les styles, le CSS permet de **positionner les √©l√©ments** dans la page web de diff√©rentes fa√ßons.

Le positionnement classique utilise la propri√©t√© position (**static**, **relative**, **absolute**, **fixed**, **sticky**) pour placer un √©l√©ment de mani√®re plus ou moins ind√©pendante du flux normal. Pour des mises en page plus complexes, le syst√®me **CSS Grid** offre une grille en deux dimensions (lignes et colonnes) permettant d‚Äôorganiser les √©l√©ments de fa√ßon souple et pr√©cise. Avec display: grid, on contr√¥le la structure, l‚Äôalignement, les espacements et la r√©partition des contenus, ce qui en fait une solution moderne et puissante pour le web design.


```{.html .custom-html}
<div id="div1">mon div1</div>
<div id="div2">mon div2</div>
```

```{.css .custom-css}
#div1 {
  position: absolute;
  left: 10px;
  top: 10px;
}

#div2 {
  position: absolute;
  left: 120px;
  top: 10px;
}
```


# Le JavaScript

Le JavaScript est le langage de script du navigateur. Il fonctionne sur tous les navigateurs web sans avoir besoin d'installer quoi que ce soit. 

### 1995
<img src="img/javascript.png" style="display: block; margin-left: 0; width: 10%;">
Le langage Javascript a √©t√© cr√©√© en dix jours en mai 1995 pour la Netscape Communications Corporation par **Brendan Eich**. Au d√©part, l'id√©e √©tait de construire un petit langage pour faire des interactions sur les pages web. Attention, Javascript n'est pas JAVA !

### 1997

<img src="img/ecma.png" style="display: block; margin-left: 0; width: 20%;">
Le langage Javascript est normalis√© depuis 1997 par la commission TC39 de l'organisation ECMA International.

### 2008

Les navigateurs web ont travaill√© √† de nouveaux moteurs pour am√©liorer les performances. **V8** est un moteur JavaScript open-source d√©velopp√© par le projet Chromium pour les navigateurs Web Google Chrome et Chromium (derni√®re version 31 janvier 2022). Il y a aussi **SpiderMonkey** pour Firefox, **Chakra** pour Microsoft Edge et **JavaScriptCore** pour Safari.

### 2009
<img src="img/node.png" style="display: block; margin-left: 0; width: 15%;">
Cr√©ation de Node.js par **Ryan Dahl**, qui permet d'utiliser le JavaScript comme langage de programmation c√¥t√© serveur (back-End).

### 2015

Depuis 2015 (ES6 ou ES2015), le langage JavaScript est mature. Performant. Et est impl√©ment√© de mani√®re harmonis√©e dans tous les navigateurs. On parle de *modern JavaScript*

### demain ?

De nouvelles fonctionnalit√©es sont ajout√©es au langage chaque ann√©e.

### Une grande communaut√©

C'est un langage ancien qui dispose d'une tr√®s grande communaut√©.

### Les principes de base

Les variables permettent de stocker des donnes. 

```{.js .custom-js}
let age = 30;
const name = "Lakshmi";
```

Il existe plusieurs types de donn√©es : **number**, **string**, **boolean**, **objets**, **tableaux**, etc.


```{.js .custom-js}
let fruits = ["pomme", "banane"]; // Array
let person = { name: "Alice", age: 30 }; // Objet avec cl√©s et valeurs
```

JavaScript est un langage fonctionnel. On ecrit beaucoup de fonctions. Par exemple : 

```{.js .custom-js}
function sayHello(name) {
  return "Hello " + name;
}
```

Ou, avec l'√©criture flech√©e (arrow functions)

```{.js .custom-js}
const sayHello = (name) => {
  return "Hello " + name;
};
```

Pour visualiser les r√©sultats, on peut utiliser la console.

```{.js .custom-js}
console.log(sayHello("dude"))
```

Ex√©cuter du code selon une condition.

```{.js .custom-js}
const age = 20;
if (age > 18) {
  console.log("Majeur");
} else {
  console.log("Mineur");
}
```


R√©p√©ter une action avec une boucle for

```{.js .custom-js}
for (let i = 0; i < 5; i++) {
  console.log(i);
}
```

### Le format JSON

Le JSON (JavaScript Object Notation) est un format l√©ger de donn√©es cr√©√© en 2001 par Douglas Crockford. Il sert √† repr√©senter des informations sous forme de paires cl√©-valeur dans un texte lisible, facile √† √©changer entre applications. Tr√®s simple et universel, JSON est largement utilis√© gr√¢ce √† sa compatibilit√© avec de nombreux langages de programmation.

Voici √† quoi ca ressemble. En fait, il s'agit d'un Array dont chaque √©l√©ment est un objet. C'ets la fa√ßon qu'on a en JavaScrit de formaliser un tableau. 

```{.js .custom-js}
const books = [
{"titre":"Le Petit Prince","auteur":"Antoine de Saint-Exup√©ry","cycle":"jeunesse","annee":1943},
{"titre":"Harry Potter √† l'√©cole des sorciers","auteur":"J.K. Rowling","cycle":"jeunesse","annee":1997},
{"titre":"Les Mis√©rables","auteur":"Victor Hugo","cycle":"classique","annee":1862},
{"titre":"Dune","auteur":"Frank Herbert","cycle":"science-fiction","annee":1965},
{"titre":"Indignez-vous !","auteur":"St√©phane Hessel","cycle":"essai","annee":2010},
{"titre":"Madame Bovary","auteur":"Gustave Flaubert","cycle":"classique","annee":1857},
{"titre":"1984","auteur":"George Orwell","cycle":"science-fiction","annee":1949},
{"titre":"Le Capital","auteur":"Karl Marx","cycle":"essai","annee":1867},
{"titre":"Fahrenheit 451","auteur":"Ray Bradbury","cycle":"science-fiction","annee":1953},
{"titre":"Surveiller et punir","auteur":"Michel Foucault","cycle":"essai","annee":1975},
]
```

Connaitre le nombre d'√©l√©ments

```{.js .custom-js}
console.log(books.length)
```

R√©cup√©rer l'auteur de la 2e ligne

```{.js .custom-js}
console.log(books[1]) // 1 car la premi√®re ligne a l'index 0.
```

R√©cup√©rer la 2e ligne

```{.js .custom-js}
console.log(books[1].titre) 
```

Ajouter un √©l√©ment en fin de tableau  (`push`)

```{.js .custom-js}
const newBooks = {"titre":"Harry Potter √† l'√©cole des sorciers","auteur":"J.K. Rowling","cycle":"jeunesse","annee":1997}
books.push(newBooks)
console.log(books)
```

Ajouter un √©l√©ment au d√©but du tableau (`unshift`)

```{.js .custom-js}
const newBooks2 = {"titre":"Le Deuxi√®me Sexe","auteur":"Simone de Beauvoir","cycle":"essai","annee":1949}
books.unshift(newBooks2)
console.log(books)
```

Trier (`sort`)

```{.js .custom-js}
console.log(books.sort((a, b) => a.annee - b.annee))
```

Filtrer (`filter`)

```{.js .custom-js}
console.log(books.filter(d => d.cycle == "classique"))
```

It√©rer avec `map` et `forEach`

```{.js .custom-js}
console.log(books.map(d => d.auteur))
```

```{.js .custom-js}
let auteurs = [];
books.forEach(d => {
  auteurs.push(d.auteur);
});
console.log(auteurs);
```

R√©cup√©rer des modalit√©s uniques (`Set`)

```{.js .custom-js}
console.log(books.filter(d => d.cycle == "classique"))
```

```{.js .custom-js}
console.log(books[1]) // 1 car la premi√®re ligne a l'index 0.
```

Les filtres permettent de r√©cup√©rer 

```{.js .custom-js}
let cycles = books.map(d => d.cycle)
cycles = new Set(cycles)
cycles = Array.from(cycles)
console.log(cycles)
```

**<ins>Exercice</ins>**

Copiez ce code dans JSFidle et remplissez-le.

```{.js .custom-js}
// On va chercher un ficher JSON directement en ligne. Nous expliquerons fetch et then plus tard.
fetch("https://raw.githubusercontent.com/neocarto/Webmapping/refs/heads/main/data/cities.json")
  .then(response => response.json())
  .then(data => {
    // --------------------------
    // Commencez √† travailler ici
    console.log(data)
    
    // Combien y a t-il de villes ?
    
    // Filtrez pour le conserver que les villes de plus de 500 000 habitants 

    // Combien y en a t'il ?

    // Combien y en a t-il dans l'h√©misph√®re Sud ? 

    // Combien y en a t-il de villes de plus de 500 000 habitants en France ?

    // Affichez la liste

    // Fin
    // ------------------
});
```

### Les biblioth√®ques

Une biblioth√®que JavaScript est un ensemble de fonctions ou d‚Äôobjets pr√™ts √† l‚Äôemploi, √©crits en JavaScript, que tu peux r√©utiliser dans tes projets pour √©viter de tout coder √† la main. Les bibiolt√®ques JavaScript sont disponibles dans **npm** (abr√©viation de Node Package Manager).

![](img/npm.png){width="100%"}

Il y a plusieurs fa√ßons d'importer une biblioth√®que. Ici, on utilise un **CDN** (Content Delivery Network, ou r√©seau de diffusion de contenu). C‚Äôest la m√©thode la plus simple pour les projets HTML statiques.

**La biblioth√®que confetti** 


```{.html .custom-html}
<!-- Import de la biblioth√®que-->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
```  

```{.js .custom-js}
confetti({
      particleCount: 150,
      spread: 70,
      origin: { y: 0.6 }
    });
```

**La biblioth√®que leafet** 

Leaflet est une biblioth√®que JavaScript open source cr√©√©e en 2010 par Vladimir Agafonkin, un d√©veloppeur ukrainien. Elle permet de cr√©er facilement des cartes interactives pour le web. C'ets une des plus connues et des plus ancvienne.

```{.html .custom-html}
<!-- Import de la biblioth√®que et du css-->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<div id="map"></div>
```  

```{.js .custom-js}
    const map = L.map('map').setView([46.8, 2.5], 6);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: '¬© OpenStreetMap'
    }).addTo(map);
```

```{.css .custom-css}
#map {
    height: 500px;
}
```

**La biblioth√®que maplibre-gl** 

MapLibre est une biblioth√®que JavaScript open source permettant d'afficher des cartes interactives vectorielles sur le web, en 2D ou en 3D (vue "globe"). Elle est n√©e en 2020 suite √† la d√©cision de Mapbox de fermer le code source de Mapbox GL JS √† partir de la version 2. MapLibre constitue donc une alternative libre, soutenue par une communaut√© active. 

```{.html .custom-html}
<!-- Import de la biblioth√®que et du css-->
<script src="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.js"></script>
<link href="https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.css" rel="stylesheet" />
<div id="map"></div>
```  

```{.js .custom-js}
const map = new maplibregl.Map({
  container: 'map',
  style: 'https://basemaps.cartocdn.com/gl/voyager-gl-style/style.json',
  center: [2.5, 46.8], // [lon, lat]
  zoom: 6,
});;
```

```{.css .custom-css}
#map {
    height: 500px;
}
```

# Le DOM

Nous avons dit que le HTML √©tait le squelette de la page, constitu√© des balises, des classes et d'identifiants. Une autre fa√ßon de voir ce squelette est de l'imaginer comme un arbre avec des noeuds et des ramifications. 

![](img/DOM.png)

Le DOM (**Document Object Model**) est une repr√©sentation en m√©moire de la page web, que JavaScript est capable de manipuler.

```
<html>
  <body>
    <p>Bonjour</p>
  </body>
</html>
```

devient

```
document
 ‚îî‚îÄ html
     ‚îî‚îÄ body
         ‚îî‚îÄ p
```

Pour acceder √† un √©lement en JavaScript, on utilise `document.querySelector()`. Cela premet de r√©cup√©rer le contenu d'un √©l√©ment de la page web.

- `document.querySelector("#monid")` permet d'acceder √† un noeud d√©fini par un identifiant

- `document.querySelector(".maclasse")` permet d'acceder au premier √©lement d'une classe

- `document.querySelector("tag")` permet d'acceder au premier tag. Par exemple, `document.querySelector("p")` permet d'acceder au premier `<p>`.

Voici un squelete HTML : 


```{.html .custom-html}
<div id = "monid">Alea jacta est</div>
``` 

Et voici comment on peut interagir avec en JavaScript
 

```{.js .custom-js}
const montext = console.log(document.querySelector("#monid").textContent)
console.log(montext)
```

Et ca permet aussi de le changer.


```{.js .custom-js}
document.querySelector("#monid").textContent = "coucou"
```

Et si je veux ajouter un ppint d'exclamation dans le div et le mettre en gras. 

```{.js .custom-js}
let mondiv = document.querySelector("#monid")
let baliseB = document.createElement("b");
baliseB.textContent = " !"
mondiv.appendChild(baliseB);
```

J'aurais aussi pu utiliser innerHTML : 


```{.js .custom-js}
v.innerHTML = document.querySelector("#monid").textContent + "<b> !</>"
```

Du coup, vous pouvez rendre des calculs JavaScript dans le navigateur. 

```{.html .custom-html}
<div>Dans ma miblioth√®que, il y a <span id = "count"></span> livres.</div>
``` 

```{.js .custom-js}
const books = [
{"titre":"Le Petit Prince","auteur":"Antoine de Saint-Exup√©ry","cycle":"jeunesse","annee":1943},
{"titre":"Harry Potter √† l'√©cole des sorciers","auteur":"J.K. Rowling","cycle":"jeunesse","annee":1997},
{"titre":"Les Mis√©rables","auteur":"Victor Hugo","cycle":"classique","annee":1862},
{"titre":"Dune","auteur":"Frank Herbert","cycle":"science-fiction","annee":1965},
{"titre":"Indignez-vous !","auteur":"St√©phane Hessel","cycle":"essai","annee":2010},
{"titre":"Madame Bovary","auteur":"Gustave Flaubert","cycle":"classique","annee":1857},
{"titre":"1984","auteur":"George Orwell","cycle":"science-fiction","annee":1949},
{"titre":"Le Capital","auteur":"Karl Marx","cycle":"essai","annee":1867},
{"titre":"Fahrenheit 451","auteur":"Ray Bradbury","cycle":"science-fiction","annee":1953},
{"titre":"Surveiller et punir","auteur":"Michel Foucault","cycle":"essai","annee":1975},
]

document.querySelector("#count").textContent = books.length
```

On peut aussi d√©clencher du code JavaScript en inetergissant sur la page.

```{.html .custom-html}
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<button onclick="launchConfetti()">üéâ Clique ici !</button>
```

```{.js .custom-js}
    function launchConfetti() {
      confetti({
        particleCount: 100,
        spread: 70,
        origin: { y: 0.6 }
      });
    }
```

# Les √©couteurs

Avec un √©couteur `addEventListener` (recommand√©), on aurait pu faire comme ca. Cette m√©thode a l'avantage de bien s√©parer le comportement (g√©r√© en JS) et la structure (squelette HTML).


```{.html .custom-html}
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<button id="confettiBtn">üéâ Clique ici !</button>
```

```{.js .custom-js}
    function launchConfetti() {
      confetti({
        particleCount: 1000,
        spread: 500,
        origin: { y: 0.6 }
      });
    }
document.querySelector("#confettiBtn").addEventListener("click", launchConfetti)
```

Ici, on a utilis√© `click`, mais il existe plein d'autres types d√©venements, comme `dblclick`, `mouseover`, `mouseout`, `submit`, `change`, etc. Voir : [https://developer.mozilla.org/fr/docs/Web/Events](https://developer.mozilla.org/fr/docs/Web/Events).

Avec tout ce qu'on a appris, on peut d√©sormais construire des applications web r√©actives. Reprenons notre SVG de tout √† l'heure.

```{.html .custom-html}
<h1>Un cercle SVG r√©actif</h1>

<div>
  <label for="rayon">Rayon : </label>
  <input type="range" id="position" min="50" max="600" value="100">
  <span id="valeur">100</span>
</div>

<svg width="650" height="200">
  <circle id="monCercle" cx="100" cy="100" r="50" fill="green" />
</svg>
```


```{.js .custom-js}
const slider = document.querySelector("#position");
const valeur = document.querySelector("#valeur");
const cercle = document.querySelector("#monCercle");

slider.addEventListener("input", function () {
// Ici, nous avons choisi l'evenement input. Input e d√©clenche imm√©diatement √† chaque modification de la valeur.
// Contrairement √† change qui se d√©clenche uniquement quand l'utilisateur a termin√© de bouger le curseur (et rel√¢che la souris)
   const pos = slider.value;
   cercle.setAttribute("cx", pos);
   valeur.textContent = pos;
});
  ```

  **<ins>Exercice</ins>**

Reprennez l'exemple ci-dessus.

1 - dans un nouveau div, ajoutez un autre slider pour changer le rayon du cercle
2 - dans un nouveau div, ajoutez un √©l√©ment de formulaire de type "color" pour changer la couleur du cercle.

A vous de jouer !



